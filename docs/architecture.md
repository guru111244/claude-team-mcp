# æ¶æ„è®¾è®¡

## ç³»ç»Ÿæ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Claude Code                              â”‚
â”‚                                                                 â”‚
â”‚  ç”¨æˆ·è¾“å…¥: "å¸®æˆ‘å†™ä¸€ä¸ªå…¨æ ˆç™»å½•åŠŸèƒ½"                               â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ MCP Protocol
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Claude Team MCP Server                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                     ğŸ§  Tech Lead                          â”‚ â”‚
â”‚  â”‚                   (åè°ƒè€… / ä»»åŠ¡åˆ†æ)                      â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  è¾“å…¥: ç”¨æˆ·éœ€æ±‚                                           â”‚ â”‚
â”‚  â”‚  è¾“å‡º: ä»»åŠ¡åˆ†è§£ + ä¸“å®¶åˆ†é…                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                                  â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚              â–¼               â–¼               â–¼                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  å‰ç«¯ä¸“å®¶     â”‚ â”‚  åç«¯ä¸“å®¶     â”‚ â”‚   QAä¸“å®¶      â”‚        â”‚
â”‚  â”‚  (Gemini)    â”‚ â”‚  (Claude)    â”‚ â”‚   (GPT)      â”‚        â”‚
â”‚  â”‚              â”‚ â”‚              â”‚ â”‚              â”‚        â”‚
â”‚  â”‚ - React/Vue  â”‚ â”‚ - APIè®¾è®¡    â”‚ â”‚ - ä»£ç å®¡æŸ¥   â”‚        â”‚
â”‚  â”‚ - CSS/UI     â”‚ â”‚ - æ•°æ®åº“     â”‚ â”‚ - Bugä¿®å¤    â”‚        â”‚
â”‚  â”‚ - äº¤äº’é€»è¾‘   â”‚ â”‚ - å®‰å…¨è®¤è¯   â”‚ â”‚ - æµ‹è¯•ç”¨ä¾‹   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚              â”‚               â”‚               â”‚                 â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                              â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                   ğŸ’¬ åä½œç©ºé—´                              â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  ä¸“å®¶ä¹‹é—´çš„å¯¹è¯ã€ä»£ç å®¡æŸ¥ã€è¿­ä»£ä¿®å¤                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                                  â”‚
â”‚                              â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                   ğŸ“¦ ç»“æœèšåˆå™¨                            â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  æ•´åˆæ‰€æœ‰ä¸“å®¶çš„äº§å‡ºï¼Œæ ¼å¼åŒ–è¾“å‡º                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                        è¿”å›ç»™ Claude Code
```

---

## æ ¸å¿ƒæ¨¡å—

### 1. MCP Server å±‚

è´Ÿè´£ä¸ Claude Code é€šä¿¡ï¼Œæš´éœ²ä»¥ä¸‹å·¥å…·ï¼š

| å·¥å…·å | åŠŸèƒ½ | å‚æ•° |
|--------|------|------|
| `team_work` | å®Œæ•´å›¢é˜Ÿåä½œæµç¨‹ | `task: string` |
| `ask_expert` | å’¨è¯¢ç‰¹å®šä¸“å®¶ | `expert: string, question: string` |
| `code_review` | ä»£ç å®¡æŸ¥ | `code: string, reviewer: string` |
| `fix_bug` | Bug ä¿®å¤ | `code: string, error: string` |

```typescript
// MCP å·¥å…·å®šä¹‰
const tools = [
  {
    name: "team_work",
    description: "è®© AI å¼€å‘å›¢é˜Ÿåä½œå®Œæˆä»»åŠ¡",
    inputSchema: {
      type: "object",
      properties: {
        task: { type: "string", description: "ä»»åŠ¡æè¿°" },
        context: { type: "string", description: "é¢å¤–ä¸Šä¸‹æ–‡ï¼ˆå¯é€‰ï¼‰" }
      },
      required: ["task"]
    }
  }
  // ...
];
```

### 2. Tech Lead (åè°ƒè€…)

ä½¿ç”¨è½»é‡æ¨¡å‹ï¼ˆå¦‚ GPT-4o-miniï¼‰åˆ†æç”¨æˆ·éœ€æ±‚ï¼š

**è¾“å…¥ï¼š** ç”¨æˆ·ä»»åŠ¡æè¿°  
**è¾“å‡ºï¼š** ç»“æ„åŒ–çš„ä»»åŠ¡åˆ†è§£

```json
{
  "analysis": "ç”¨æˆ·éœ€è¦ä¸€ä¸ªå…¨æ ˆç™»å½•åŠŸèƒ½",
  "subtasks": [
    {
      "id": "1",
      "type": "frontend",
      "description": "åˆ›å»º React ç™»å½•ç»„ä»¶",
      "expert": "frontend",
      "dependencies": []
    },
    {
      "id": "2", 
      "type": "backend",
      "description": "åˆ›å»ºç™»å½• API å’Œ JWT è®¤è¯",
      "expert": "backend",
      "dependencies": []
    },
    {
      "id": "3",
      "type": "review",
      "description": "ä»£ç å®¡æŸ¥å’Œå®‰å…¨æ£€æŸ¥",
      "expert": "qa",
      "dependencies": ["1", "2"]
    }
  ],
  "workflow": "parallel_then_review"
}
```

### 3. Expert Agents (ä¸“å®¶æ™ºèƒ½ä½“)

æ¯ä¸ªä¸“å®¶æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ™ºèƒ½ä½“ï¼Œæœ‰è‡ªå·±çš„ï¼š

- **è§’è‰²å®šä¹‰** (System Prompt)
- **æ¨¡å‹ç»‘å®š** (Gemini / Claude / GPT)
- **èƒ½åŠ›æè¿°** (æ“…é•¿ä»€ä¹ˆ)

```typescript
interface Expert {
  id: string;
  name: string;
  model: ModelAdapter;
  systemPrompt: string;
  capabilities: string[];
}

const frontendExpert: Expert = {
  id: "frontend",
  name: "å‰ç«¯ä¸“å®¶",
  model: new GeminiAdapter(),
  systemPrompt: `ä½ æ˜¯ä¸€ä½èµ„æ·±å‰ç«¯å·¥ç¨‹å¸ˆï¼Œç²¾é€šï¼š
    - React / Vue / Svelte
    - TypeScript
    - CSS / Tailwind / Styled-components
    - çŠ¶æ€ç®¡ç† (Redux, Zustand, Pinia)
    - æ€§èƒ½ä¼˜åŒ–å’Œæœ€ä½³å®è·µ`,
  capabilities: ["ui", "css", "react", "vue", "javascript", "typescript"]
};
```

### 4. Collaboration Space (åä½œç©ºé—´)

ç®¡ç†ä¸“å®¶ä¹‹é—´çš„å¯¹è¯å’Œåä½œï¼š

```typescript
interface Message {
  from: string;      // å‘é€è€… (expert id)
  to: string;        // æ¥æ”¶è€… (expert id æˆ– "all")
  content: string;   // æ¶ˆæ¯å†…å®¹
  type: "output" | "question" | "review" | "fix";
}

class CollaborationSpace {
  private messages: Message[] = [];
  
  // ä¸“å®¶å‘å¸ƒäº§å‡º
  publish(from: string, content: string): void;
  
  // ä¸“å®¶ä¹‹é—´å¯¹è¯
  discuss(from: string, to: string, question: string): Promise<string>;
  
  // è¯·æ±‚ä»£ç å®¡æŸ¥
  requestReview(code: string, reviewer: string): Promise<ReviewResult>;
  
  // è·å–æ‰€æœ‰å¯¹è¯å†å²
  getHistory(): Message[];
}
```

### 5. Model Adapters (æ¨¡å‹é€‚é…å™¨)

ç»Ÿä¸€æ¥å£ï¼Œå±è”½å„å‚å•† API å·®å¼‚ï¼š

```typescript
interface ModelAdapter {
  chat(messages: ChatMessage[]): Promise<string>;
  stream(messages: ChatMessage[]): AsyncGenerator<string>;
}

class GeminiAdapter implements ModelAdapter {
  async chat(messages: ChatMessage[]): Promise<string> {
    // è°ƒç”¨ Gemini API
  }
}

class ClaudeAdapter implements ModelAdapter {
  async chat(messages: ChatMessage[]): Promise<string> {
    // è°ƒç”¨ Claude API
  }
}

class OpenAIAdapter implements ModelAdapter {
  async chat(messages: ChatMessage[]): Promise<string> {
    // è°ƒç”¨ OpenAI API
  }
}
```

### 6. Result Aggregator (ç»“æœèšåˆå™¨)

æ•´åˆæ‰€æœ‰ä¸“å®¶çš„äº§å‡ºï¼š

```typescript
interface TaskResult {
  success: boolean;
  summary: string;
  outputs: {
    expert: string;
    content: string;
    files?: FileOutput[];
  }[];
  reviews: ReviewResult[];
  conversation: Message[];
}
```

---

## å·¥ä½œæµç¨‹

### æ ‡å‡†æµç¨‹

```
1. ç”¨æˆ·è¾“å…¥ä»»åŠ¡
       â”‚
       â–¼
2. Tech Lead åˆ†æéœ€æ±‚ï¼Œç”Ÿæˆä»»åŠ¡åˆ†è§£
       â”‚
       â–¼
3. æ ¹æ®ä¾èµ–å…³ç³»ï¼Œè°ƒåº¦ä¸“å®¶æ‰§è¡Œ
   - æ— ä¾èµ–çš„ä»»åŠ¡å¹¶è¡Œæ‰§è¡Œ
   - æœ‰ä¾èµ–çš„ä»»åŠ¡é¡ºåºæ‰§è¡Œ
       â”‚
       â–¼
4. ä¸“å®¶äº§å‡ºè¿›å…¥åä½œç©ºé—´
       â”‚
       â–¼
5. QA ä¸“å®¶å®¡æŸ¥æ‰€æœ‰äº§å‡º
   - å‘ç°é—®é¢˜ â†’ é€šçŸ¥ç›¸å…³ä¸“å®¶ä¿®å¤ â†’ å›åˆ°æ­¥éª¤ 4
   - æ— é—®é¢˜ â†’ ç»§ç»­
       â”‚
       â–¼
6. ç»“æœèšåˆå™¨æ•´åˆæ‰€æœ‰äº§å‡º
       â”‚
       â–¼
7. è¿”å›ç»™ Claude Code
```

### ç¤ºä¾‹æµç¨‹

```
ä»»åŠ¡: "å†™ä¸€ä¸ªç”¨æˆ·æ³¨å†ŒåŠŸèƒ½ï¼ŒReact + FastAPI"

Step 1: Tech Lead åˆ†æ
  â†’ è¯†åˆ«ä¸ºå…¨æ ˆä»»åŠ¡
  â†’ åˆ†é…: å‰ç«¯ä¸“å®¶ + åç«¯ä¸“å®¶
  â†’ å·¥ä½œæµ: å¹¶è¡Œå¼€å‘ â†’ QA å®¡æŸ¥

Step 2: å¹¶è¡Œæ‰§è¡Œ
  å‰ç«¯ä¸“å®¶ (Gemini):
    "æˆ‘æ¥åˆ›å»ºæ³¨å†Œè¡¨å•ç»„ä»¶..."
    è¾“å‡º: RegisterForm.tsx
  
  åç«¯ä¸“å®¶ (Claude):
    "æˆ‘æ¥åˆ›å»ºæ³¨å†Œ API..."
    è¾“å‡º: auth.py

Step 3: åä½œå¯¹è¯
  åç«¯ä¸“å®¶ â†’ å‰ç«¯ä¸“å®¶:
    "API ç«¯ç‚¹æ˜¯ POST /api/registerï¼Œè¯·æ±‚æ ¼å¼ï¼š{ email, password, name }"
  
  å‰ç«¯ä¸“å®¶ â†’ åç«¯ä¸“å®¶:
    "æ”¶åˆ°ï¼Œæˆ‘éœ€è¦è¿”å›æ ¼å¼åŒ…å« user_id æ–¹ä¾¿è·³è½¬åˆ°ç”¨æˆ·ä¸»é¡µ"

Step 4: QA å®¡æŸ¥
  QAä¸“å®¶ (GPT):
    "å®¡æŸ¥å‘ç°ï¼š
     1. å¯†ç åº”è¯¥åœ¨å‰ç«¯åšå¼ºåº¦æ ¡éªŒ
     2. åç«¯åº”è¯¥å¯¹ email åšæ ¼å¼éªŒè¯
     3. å»ºè®®æ·»åŠ  rate limiting é˜²æ­¢æš´åŠ›æ³¨å†Œ"
  
  â†’ é€šçŸ¥å‰ç«¯å’Œåç«¯ä¸“å®¶ä¿®å¤

Step 5: ä¿®å¤è¿­ä»£
  å‰ç«¯ä¸“å®¶: æ·»åŠ å¯†ç å¼ºåº¦æ ¡éªŒ
  åç«¯ä¸“å®¶: æ·»åŠ  email éªŒè¯ + rate limiting

Step 6: æœ€ç»ˆå®¡æŸ¥é€šè¿‡

Step 7: è¾“å‡ºç»“æœ
```

---

## ç›®å½•ç»“æ„

```
claude-team/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts              # MCP Server å…¥å£
â”‚   â”œâ”€â”€ server.ts             # MCP Server å®ç°
â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”œâ”€â”€ tech-lead.ts      # Tech Lead åè°ƒè€…
â”‚   â”‚   â”œâ”€â”€ expert.ts         # ä¸“å®¶åŸºç±»
â”‚   â”‚   â”œâ”€â”€ frontend.ts       # å‰ç«¯ä¸“å®¶
â”‚   â”‚   â”œâ”€â”€ backend.ts        # åç«¯ä¸“å®¶
â”‚   â”‚   â””â”€â”€ qa.ts             # QA ä¸“å®¶
â”‚   â”œâ”€â”€ adapters/
â”‚   â”‚   â”œâ”€â”€ base.ts           # é€‚é…å™¨æ¥å£
â”‚   â”‚   â”œâ”€â”€ gemini.ts         # Gemini é€‚é…å™¨
â”‚   â”‚   â”œâ”€â”€ claude.ts         # Claude é€‚é…å™¨
â”‚   â”‚   â””â”€â”€ openai.ts         # OpenAI é€‚é…å™¨
â”‚   â”œâ”€â”€ collaboration/
â”‚   â”‚   â”œâ”€â”€ space.ts          # åä½œç©ºé—´
â”‚   â”‚   â””â”€â”€ workflow.ts       # å·¥ä½œæµå¼•æ“
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ loader.ts         # é…ç½®åŠ è½½å™¨
â”‚   â”‚   â””â”€â”€ schema.ts         # é…ç½® schema
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ logger.ts         # æ—¥å¿—å·¥å…·
â”‚       â””â”€â”€ context.ts        # ä¸Šä¸‹æ–‡ç®¡ç†
â”œâ”€â”€ config/
â”‚   â””â”€â”€ default.yaml          # é»˜è®¤é…ç½®
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ README.md
â”‚   â”œâ”€â”€ architecture.md
â”‚   â””â”€â”€ configuration.md
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ README.md
```

---

## æ‰©å±•æ€§è®¾è®¡

### æ·»åŠ æ–°æ¨¡å‹

å®ç° `ModelAdapter` æ¥å£å³å¯ï¼š

```typescript
class OllamaAdapter implements ModelAdapter {
  async chat(messages: ChatMessage[]): Promise<string> {
    // è°ƒç”¨æœ¬åœ° Ollama
  }
}
```

### æ·»åŠ æ–°ä¸“å®¶

ç»§æ‰¿ `Expert` åŸºç±»ï¼š

```typescript
class DatabaseExpert extends Expert {
  constructor() {
    super({
      id: "database",
      name: "æ•°æ®åº“ä¸“å®¶",
      model: new ClaudeAdapter(),
      systemPrompt: "ä½ æ˜¯æ•°æ®åº“ä¸“å®¶ï¼Œç²¾é€š SQLã€ç´¢å¼•ä¼˜åŒ–ã€æ•°æ®å»ºæ¨¡...",
      capabilities: ["sql", "database", "optimization"]
    });
  }
}
```

### è‡ªå®šä¹‰å·¥ä½œæµ

```yaml
# config/workflows/custom.yaml
name: "mobile-first"
description: "ç§»åŠ¨ç«¯ä¼˜å…ˆå¼€å‘æµç¨‹"
steps:
  - expert: frontend
    focus: "mobile-responsive"
  - expert: backend
    focus: "api-optimization"
  - expert: qa
    focus: "performance-testing"
```
